/* css/room.css ‚Äî Neon Room (prawdziwy pok√≥j + drag) */

body {
  background: radial-gradient(circle at top, #0f172a, #020617 45%, #000 100%);
  color: #e5e7eb;
  font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
}

/* Page */
.room2d-page {
  max-width: 1100px;
  margin: 1.5rem auto 2rem;
  padding: 0 1rem;
}

.room2d-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.room2d-title { margin: 0; font-size: 1.8rem; letter-spacing: .08em; text-transform: uppercase; }
.room2d-subtitle { margin: .2rem 0 0; opacity: .8; font-size: .9rem; }

.room2d-header-right { display: inline-flex; gap: .5rem; flex-wrap: wrap; }

/* Buttons */
.room2d-btn {
  border-radius: 999px;
  border: none;
  padding: .35rem .9rem;
  font-size: .8rem;
  cursor: pointer;
  background: linear-gradient(135deg, #38bdf8, #0ea5e9);
  color: #0b1120;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .08em;
  box-shadow: 0 0 16px rgba(56, 189, 248, .6);
  transition: transform .06s ease, box-shadow .06s ease, filter .06s ease;
}
.room2d-btn:hover { transform: translateY(-1px); box-shadow: 0 0 20px rgba(56, 189, 248, .9); filter: brightness(1.04); }
.room2d-btn:active { transform: translateY(0); filter: brightness(.96); }

.room2d-btn-secondary {
  background: rgba(15, 23, 42, .95);
  color: #e5e7eb;
  border: 1px solid rgba(148, 163, 184, .45);
  box-shadow: none;
}

#room-btn-edit.is-active {
  box-shadow: 0 0 18px rgba(244, 63, 94, .9);
  outline: 1px solid rgba(244, 63, 94, .8);
}

/* ===========================
   SCENA: PRAWDZIWY POK√ìJ
   =========================== */

.room2d-scene-wrapper {
  /* zmienne kolor√≥w */
  --room-wall-main: #020617;
  --room-wall-side: #0b1224;
  --room-floor: #050816;
  --room-glow: rgba(59, 130, 246, 0.55);

  position: relative;
  border-radius: 1rem;
  overflow: hidden;
  border: 1px solid rgba(30, 64, 175, .75);
  background: #020617;
  aspect-ratio: 16 / 9;
  box-shadow:
    0 18px 40px rgba(0, 0, 0, .9),
    0 0 46px rgba(37, 99, 235, .6);
}

/* warstwa t≈Ça */
.room2d-scene-bg {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

/* tylna ≈õciana + delikatne neonowe pasy */
.room2d-scene-bg::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 50% 0%, var(--room-glow), transparent 60%),
    linear-gradient(to bottom, rgba(56,189,248,.14), transparent 40%),
    repeating-linear-gradient(
      to right,
      rgba(148,163,184,.08) 0px,
      rgba(148,163,184,.08) 1px,
      transparent 1px,
      transparent 60px
    ),
    linear-gradient(to bottom, var(--room-wall-main) 0%, #020617 80%);
  opacity: .95;
}

/* pod≈Çoga w perspektywie (prawdziwy ‚Äûpok√≥j‚Äù) */
.room2d-scene-bg::after {
  content: "";
  position: absolute;
  left: -10%;
  right: -10%;
  bottom: -40%;
  height: 70%;
  transform-origin: bottom center;
  transform: perspective(900px) rotateX(68deg);
  background:
    radial-gradient(circle at center, rgba(34,211,238,.18), transparent 55%),
    repeating-linear-gradient(
      to right,
      rgba(56,189,248,.12) 0px,
      rgba(56,189,248,.12) 1px,
      transparent 1px,
      transparent 42px
    ),
    repeating-linear-gradient(
      to bottom,
      rgba(56,189,248,.12) 0px,
      rgba(56,189,248,.12) 1px,
      transparent 1px,
      transparent 42px
    ),
    linear-gradient(to bottom, rgba(2,6,23,.0), var(--room-floor) 35%, #020617 100%);
  filter: brightness(1.05);
  opacity: .95;
}

/* scena obiekt√≥w */
.room2d-scene {
  position: absolute;
  inset: 0;
  z-index: 1;
  touch-action: none; /* klucz do dragowania na mobile */
}

/* boczne ≈õciany jako elementy pseudo 3D */
.room2d-scene::before,
.room2d-scene::after {
  content: "";
  position: absolute;
  top: 8%;
  bottom: 34%;
  width: 28%;
  pointer-events: none;
  background:
    linear-gradient(to bottom, rgba(56,189,248,.10), transparent 35%),
    linear-gradient(to bottom, var(--room-wall-side), #020617);
  opacity: .9;
  filter: brightness(1.05);
}

.room2d-scene::before {
  left: -12%;
  transform-origin: left center;
  transform: skewY(-12deg);
  box-shadow: 16px 0 40px rgba(0,0,0,.85);
}

.room2d-scene::after {
  right: -12%;
  transform-origin: right center;
  transform: skewY(12deg);
  box-shadow: -16px 0 40px rgba(0,0,0,.85);
}

/* ===========================
   OBIEKTY
   =========================== */

.room2d-object {
  position: absolute;
  transform-origin: center bottom;
  pointer-events: auto;
  user-select: none;
  cursor: grab;
}

.room2d-object:active { cursor: grabbing; }

.room2d-object-img {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: contain;
  pointer-events: none; /* üî• klucz: img nie przechwytuje pointer√≥w */
}

/* r√≥≈ºne ‚Äúmocowania‚Äù */
.room2d-object--floor { filter: drop-shadow(0 10px 16px rgba(0,0,0,.72)); }
.room2d-object--surface { filter: drop-shadow(0 8px 12px rgba(0,0,0,.68)); }
.room2d-object--wall { filter: drop-shadow(0 6px 10px rgba(0,0,0,.70)); }
.room2d-object--ceiling { filter: drop-shadow(0 6px 12px rgba(34,211,238,.35)); opacity: .96; }

/* edycja */
.room2d-object--editable {
  outline: 1px dashed rgba(248,250,252,.65);
  outline-offset: 2px;
}
.room2d-object--editable:hover {
  outline-color: rgba(248,113,113,.9);
}

/* focus po przej≈õciu ze sklepu */
.room2d-object.is-focus {
  outline: 2px solid rgba(56, 189, 248, 0.95);
  outline-offset: 3px;
  border-radius: .6rem;
  animation: roomFocusPulse .9s ease-in-out 0s 3;
}

@keyframes roomFocusPulse {
  0%   { transform: translate(-50%, -100%) scale(1); filter: brightness(1); }
  50%  { transform: translate(-50%, -100%) scale(1.04); filter: brightness(1.2); }
  100% { transform: translate(-50%, -100%) scale(1); filter: brightness(1); }
}

/* przyk≈Çadowy styl */
.room2d-scene-wrapper.room-style-neon-blue {
  --room-wall-main: #020617;
  --room-wall-side: #0b1224;
  --room-floor: #050816;
  --room-glow: rgba(59, 130, 246, 0.65);
  border-color: rgba(59, 130, 246, 0.9);
  box-shadow:
    0 18px 40px rgba(0,0,0,.95),
    0 0 60px rgba(59,130,246,.9);
}
